# サービスの概要
URL　https://repihapi.com

## テーマ　健康的な食生活を送るためのお手伝いをする
「食事の献立を考える」「何を食べたかを記録する」「栄養素やカロリーを計算する」など、健康になるための食事を継続するには、時間と手間がかかってしまいます。
REPIHAPIは、上記のような面倒なことを、ユーザーの代わりに行うWebアプリケーションです。

## 制作背景
私は、酒さという顔の赤らみ、ほてりの症状が長期間続く皮膚疾患を持っています。
中学生のころ、酒さであることが分かり、食べものによっては症状を悪化させてしまうことから、毎日食べたものを記録するようになりました。この出来事がきっかけで、自分自身に合った健康的な食事に興味を持つようになりました。
しかし、「レシピを探して献立を考える」「実際に何を食べたかを記録する」「栄養素やカロリーを計算する」など、日々の食事の管理や記録を取ることはとても大変で、健康的で自分自身に合った食生活が、なにか分かるまでにとても時間がかかりました。
上記のような、大きな手間がかかってしまうという理由で、健康になりたいが、食生活をなかなか変えられず悩んでいる人は多くいると考え、そのような方たちの悩みを解決するために本サービスを開発しました。

## 使用技術
◆ フロントエンド
- HTML
- SCSS / Tailwind.css 2.0
- JavaScript

◆ バックエンド
- Ruby 3.0.0
- Ruby on Rails 6.1.3.2
- Rspec
- Rubocop

◆ インフラ・開発環境・本番環境
- Docker / docker-compose（開発環境）
- MySQL 8.0（バージョン確認）
- Circle CI
- Caspiriano
- AWS （VPC / EC2 / Route53 / S3 / RDS / ACM / ALB / CloudFront / IAM）

## 機能
◆ ユーザー
- 新規登録 / 一覧・詳細表示 / 編集 / 退会
- [削除予定]メール送信機能（新規登録 / パスワードの再発行）
- ログイン / ゲストログイン / Google OAuth2 / Cookieを利用した永続的セッション
- フォロー [Ajax]
- フォロー・フォロワー表示
- 検索

◆ 投稿
- 新規作成 / 一覧・詳細表示 / 編集 / 削除
- 画像（添付 / プレビュー / リサイズ）
- タグ（追加 / 検索 / ランキング / 同じタグが付いた投稿の一覧表示）
- カロリー自動計算
- お気に入り[Ajax]
- コメント（新規作成 / 削除）[Ajax]
- 検索
- 並び替え（新着 / お気に入り数 / カロリー昇順・降順）
- ランキング
- 閲覧履歴（閲覧した投稿の直近10件）

◆ 食事記録（Webサイト内の投稿で実際に食べたものを記録・管理できる機能）
- 新規追加
  追加時の投稿の情報をDBに保存し、投稿の情報更新や削除の影響を受けないよう設計
- 一覧表示
  １ヶ月ごとの食事記録をカレンダーに表示
- 削除
- 週ごと・月ごとの平均カロリーと栄養素のバランスを算出・表示
- グラフ（週ごとのカロリーと栄養素のバランスを表示）

◆ その他
- 通知（フォロー / お気に入り / コメント）
- レスポンシブデザイン
- 常時SSL化

## 工夫したところ
- N+1問題の解決
- 食事記録機能のDB設計
  食事記録のテーブルは、あえて正規化を行わず、追加時の投稿の情報をDBに保存するよう設計しました。メリットとしては以下の２点があります。
  - 食事記録に追加した投稿の情報が更新された際に、食事記録の内容も更新されてしまうことを防ぐ
  - 投稿が削除されても、食事記録には影響を与えない
- RSpecやRubocopを用いたコードの品質管理
  バグによるサイトの不具合を避けるためにRspecを導入しました。
  Model Spec、Request Specのテストを作成し、正常系・異常系のテスト、同値分割法や境界値分析などの手法を取り入れ. ました。
  また、静的解析ツールとしてRubocopを導入し、コードのフォーマットや規則を管理することで品質を保つようにしました。
- 操作のわかりやすさ・画面の見やすさ
  このアプリのメイン機能である、「レシピの登録・検索」「食事の記録」「記録の確認」の一連の操作が直感的にわかるようにしました。（具体的にどこを？）また、画面の複雑さによる離脱率を避けるために、（具体的にどこを？）
- カレンダーやグラフを使ったわかりやすい画面構成
- レスポンシブデザイン

## 今後導入予定の機能
- RSpecのRequest Spec
- TerraformによるAWSリソースのコード化
- 本番環境にDockerを導入・ECSによるコンテナ基盤の構築
- メールによる認証機能（AWSのSESを使用予定）
